<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Introduction to GeoPandas &#8212; Geopandas-101  documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" >
          Geopandas-101</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">

      </div>
    <div class="col-md-9 content">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 7ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Introduction-to-GeoPandas">
<h1>Introduction to GeoPandas<a class="headerlink" href="#Introduction-to-GeoPandas" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Table-of-Contents">
<h2>Table of Contents<a class="headerlink" href="#Table-of-Contents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="#Request-a-dataset-from-a-remote-server">Requesting a dataset remotely</a></li>
<li><a class="reference external" href="#For-a-list-of-supported-drivers-geopandas-(fiona)-will-open-use-the-following-command">Supported filetypes geopandas will open</a></li>
<li><a class="reference external" href="#Inspect-the-object-returned-from-read_file()">Inspect file returned from remote</a></li>
<li><a class="reference external" href="#Pandas-to-GeoPandas---the-GeoSeries-and-GeoDataFrame">Pandas to GeoPandas: the GeoSeries and GeoDataFrame</a></li>
<li><a class="reference external" href="#GeoSeries-attributes">GeoSeries attributes</a></li>
<li><a class="reference external" href="#area">area</a></li>
<li><a class="reference external" href="#bounds">bounds</a></li>
<li><a class="reference external" href="#area-bounds-is_valid-crs-and-centroid-use-examples">area, bounds, is_valid, crs, and centroid use examples</a></li>
<li><a class="reference external" href="#Toward-mapping---a-basic-GeoPandas-workflow">Toward mapping: a basic GeoPandas workflow</a></li>
<li><a class="reference external" href="#supported-drivers-to-use-with-GeoDataFrame.tofile()">supported drivers for to_file</a></li>
<li><a class="reference external" href="#writegeojson">write to geojson</a></li>
<li><a class="reference external" href="#Plotting-geospatial-data">Plotting geospatial data</a></li>
<li><a class="reference external" href="#make-sub-selections-of-a-DataFrame">make sub-selections of a DataFrame</a></li>
<li><a class="reference external" href="#write-sub-selection-to-shapefile">write sub-selection to shapefile</a></li>
<li><a class="reference external" href="#read-sub-selection-from-shapefile">read sub-selection from shapefile</a></li>
<li><a class="reference external" href="#checkfile">check if json data file exist and delete if exist</a></li>
<li><a class="reference external" href="#write-sub-selection-to-geojson">write sub-selection to geojson</a></li>
<li><a class="reference external" href="#set-X-and-Y-axis-limits-with-Matplotlib">set X and Y axis limits with Matplotlib</a></li>
<li><a class="reference external" href="#Adjusting-and-managing-projections">Adjusting/managing projections</a></li>
<li><a class="reference external" href="#create-a-new-GeoDataFrame-of-Portugal">create a new GeoDataFrame of Portugal</a></li>
<li><a class="reference external" href="#set-dataframe-to-new-projection">set dataframe to new projection</a></li>
<li><a class="reference external" href="#plot-Portugal">plot Portugal</a></li>
<li><a class="reference external" href="#add-the-Europe-GeoDataFrame-as-the-basemap">add the Europe GeoDataFrame as the basemap</a></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="Additional-Examples">
<h2>Additional Examples<a class="headerlink" href="#Additional-Examples" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="#Adding-a-background-tile-map-to-plots">Adding a background tile map to plots</a></li>
<li><a class="reference external" href="#Plotting-with-Geoplot-and-GeoPandas">Plotting with Geoplot</a></li>
<li><a class="reference external" href="#use-size-as-a-visual-variable-using-Cartogram">use size as a visual variable using cartogram</a></li>
<li><a class="reference external" href="#use-color-as-a-visual-variable---specify-choropleth">use color as a visual variable - specify choropleth</a></li>
<li><a class="reference external" href="#Re-project-data-into-any-of-the-map-projections-provided-by-CartoPy">re-project data into any of the map projections provided by CartoPy</a></li>
<li><a class="reference external" href="#Aggregate-geometric-features">Aggregate geometric features - dissolve function</a></li>
<li><a class="reference external" href="#aggregate-the-geodataframe-by-continents">aggregate the geodataframe by continents</a></li>
<li><a class="reference external" href="#Plot-the-new-geodataframe">plot the new geodataframe</a></li>
<li><a class="reference external" href="#Add-color-based-on-the-pop_est-for-each-continent-display-legend-to-the-right-of-the-plot">add color based on the pop_est for each continent display legend to the right of the plot-legend_kwds</a></li>
<li><a class="reference external" href="#Creating-a-GeoDataFrame-from-a-DataFrame-with-coordinates">Creating a GeoDataFrame from a DataFrame with coordinates</a></li>
<li><a class="reference external" href="#A-GeoDataFrame-needs-a-shapely-object">create a Shapely object for geodataframe</a></li>
<li><a class="reference external" href="#Transform-tuples-to-Point">transform tuples to Point</a></li>
<li><a class="reference external" href="#Create-the-GeoDataFrame-by-setting-geometry-with-the-coordinates-created-previously">create the GeoDataFrame</a></li>
<li><a class="reference external" href="#plot-geodataframe-coordinates-over-a-state-level-map-of-Florida">plot geodataframe coordinates</a></li>
<li><a class="reference external" href="#plot-a-specific-column">plot a specific column</a></li>
</ul>
<hr class="docutils" />
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>%matplotlib inline

import pandas as pd
import geopandas as gpd
import geoplot
import fiona
import os
</pre></div>
</div>
</div>
<div class="section" id="Request-a-dataset-from-a-remote-server">
<h3>Request a dataset from a remote server<a class="headerlink" href="#Request-a-dataset-from-a-remote-server" title="Permalink to this headline">¶</a></h3>
<p>A packed archive collection of Shapefiles contained within a .zip file.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries_raw = gpd.read_file(&#39;https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/50m/cultural/ne_50m_admin_0_countries.zip&#39;)
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>#countries_raw = gpd.read_file(&#39;ne_50m_admin_0_countries/ne_50m_admin_0_countries.shp&#39;)
</pre></div>
</div>
</div>
</div>
<div class="section" id="For-a-list-of-supported-drivers-geopandas-(fiona)-will-open-use-the-following-command">
<h3>For a <strong>list of supported drivers</strong> geopandas (fiona) will open use the following command<a class="headerlink" href="#For-a-list-of-supported-drivers-geopandas-(fiona)-will-open-use-the-following-command" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">fiona.supported_drivers</span></code></p>
</div>
<div class="section" id="Inspect-the-object-returned-from-read_file()">
<h3>Inspect the object returned from read_file()<a class="headerlink" href="#Inspect-the-object-returned-from-read_file()" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>type(countries_raw)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>geopandas.geodataframe.GeoDataFrame
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries_raw.info()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;geopandas.geodataframe.GeoDataFrame&#39;&gt;
RangeIndex: 241 entries, 0 to 240
Data columns (total 95 columns):
featurecla    241 non-null object
scalerank     241 non-null int64
LABELRANK     241 non-null int64
SOVEREIGNT    241 non-null object
SOV_A3        241 non-null object
ADM0_DIF      241 non-null int64
LEVEL         241 non-null int64
TYPE          241 non-null object
ADMIN         241 non-null object
ADM0_A3       241 non-null object
GEOU_DIF      241 non-null int64
GEOUNIT       241 non-null object
GU_A3         241 non-null object
SU_DIF        241 non-null int64
SUBUNIT       241 non-null object
SU_A3         241 non-null object
BRK_DIFF      241 non-null int64
NAME          241 non-null object
NAME_LONG     241 non-null object
BRK_A3        241 non-null object
BRK_NAME      241 non-null object
BRK_GROUP     3 non-null object
ABBREV        241 non-null object
POSTAL        241 non-null object
FORMAL_EN     229 non-null object
FORMAL_FR     5 non-null object
NAME_CIAWF    229 non-null object
NOTE_ADM0     44 non-null object
NOTE_BRK      9 non-null object
NAME_SORT     241 non-null object
NAME_ALT      4 non-null object
MAPCOLOR7     241 non-null int64
MAPCOLOR8     241 non-null int64
MAPCOLOR9     241 non-null int64
MAPCOLOR13    241 non-null int64
POP_EST       241 non-null int64
POP_RANK      241 non-null int64
GDP_MD_EST    241 non-null float64
POP_YEAR      241 non-null int64
LASTCENSUS    241 non-null int64
GDP_YEAR      241 non-null int64
ECONOMY       241 non-null object
INCOME_GRP    241 non-null object
WIKIPEDIA     241 non-null int64
FIPS_10_      241 non-null object
ISO_A2        241 non-null object
ISO_A3        241 non-null object
ISO_A3_EH     241 non-null object
ISO_N3        241 non-null object
UN_A3         241 non-null object
WB_A2         241 non-null object
WB_A3         241 non-null object
WOE_ID        241 non-null int64
WOE_ID_EH     241 non-null int64
WOE_NOTE      241 non-null object
ADM0_A3_IS    241 non-null object
ADM0_A3_US    241 non-null object
ADM0_A3_UN    241 non-null int64
ADM0_A3_WB    241 non-null int64
CONTINENT     241 non-null object
REGION_UN     241 non-null object
SUBREGION     241 non-null object
REGION_WB     241 non-null object
NAME_LEN      241 non-null int64
LONG_LEN      241 non-null int64
ABBREV_LEN    241 non-null int64
TINY          241 non-null int64
HOMEPART      241 non-null int64
MIN_ZOOM      241 non-null float64
MIN_LABEL     241 non-null float64
MAX_LABEL     241 non-null float64
NE_ID         241 non-null int64
WIKIDATAID    241 non-null object
NAME_AR       241 non-null object
NAME_BN       238 non-null object
NAME_DE       241 non-null object
NAME_EN       241 non-null object
NAME_ES       241 non-null object
NAME_FR       241 non-null object
NAME_EL       241 non-null object
NAME_HI       240 non-null object
NAME_HU       241 non-null object
NAME_ID       241 non-null object
NAME_IT       241 non-null object
NAME_JA       241 non-null object
NAME_KO       241 non-null object
NAME_NL       241 non-null object
NAME_PL       241 non-null object
NAME_PT       241 non-null object
NAME_RU       241 non-null object
NAME_SV       241 non-null object
NAME_TR       241 non-null object
NAME_VI       241 non-null object
NAME_ZH       241 non-null object
geometry      241 non-null object
dtypes: float64(4), int64(27), object(64)
memory usage: 178.9+ KB
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries_raw.describe()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>scalerank</th>
      <th>LABELRANK</th>
      <th>ADM0_DIF</th>
      <th>LEVEL</th>
      <th>GEOU_DIF</th>
      <th>SU_DIF</th>
      <th>BRK_DIFF</th>
      <th>MAPCOLOR7</th>
      <th>MAPCOLOR8</th>
      <th>MAPCOLOR9</th>
      <th>...</th>
      <th>ADM0_A3_WB</th>
      <th>NAME_LEN</th>
      <th>LONG_LEN</th>
      <th>ABBREV_LEN</th>
      <th>TINY</th>
      <th>HOMEPART</th>
      <th>MIN_ZOOM</th>
      <th>MIN_LABEL</th>
      <th>MAX_LABEL</th>
      <th>NE_ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>241.0</td>
      <td>241.0</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>...</td>
      <td>241.0</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>241.000000</td>
      <td>2.410000e+02</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>1.867220</td>
      <td>4.149378</td>
      <td>0.211618</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.008299</td>
      <td>0.029046</td>
      <td>3.348548</td>
      <td>3.622407</td>
      <td>3.858921</td>
      <td>...</td>
      <td>-99.0</td>
      <td>8.908714</td>
      <td>10.082988</td>
      <td>5.041494</td>
      <td>-75.651452</td>
      <td>-16.012448</td>
      <td>0.085892</td>
      <td>3.684647</td>
      <td>8.531120</td>
      <td>1.159321e+09</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.316167</td>
      <td>1.432687</td>
      <td>0.409306</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.090908</td>
      <td>0.168284</td>
      <td>1.815124</td>
      <td>1.909013</td>
      <td>2.184418</td>
      <td>...</td>
      <td>0.0</td>
      <td>4.213071</td>
      <td>6.073968</td>
      <td>1.496642</td>
      <td>43.030063</td>
      <td>37.652410</td>
      <td>0.677963</td>
      <td>1.069605</td>
      <td>1.155993</td>
      <td>3.354489e+02</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>2.000000</td>
      <td>0.000000</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>...</td>
      <td>-99.0</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>3.000000</td>
      <td>-99.000000</td>
      <td>-99.000000</td>
      <td>0.000000</td>
      <td>1.700000</td>
      <td>5.200000</td>
      <td>1.159320e+09</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>...</td>
      <td>-99.0</td>
      <td>6.000000</td>
      <td>6.000000</td>
      <td>4.000000</td>
      <td>-99.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>3.000000</td>
      <td>8.000000</td>
      <td>1.159321e+09</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>1.000000</td>
      <td>4.000000</td>
      <td>0.000000</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>3.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>...</td>
      <td>-99.0</td>
      <td>8.000000</td>
      <td>8.000000</td>
      <td>5.000000</td>
      <td>-99.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>4.000000</td>
      <td>9.000000</td>
      <td>1.159321e+09</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>3.000000</td>
      <td>6.000000</td>
      <td>0.000000</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>5.000000</td>
      <td>5.000000</td>
      <td>6.000000</td>
      <td>...</td>
      <td>-99.0</td>
      <td>10.000000</td>
      <td>12.000000</td>
      <td>6.000000</td>
      <td>-99.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>4.500000</td>
      <td>9.500000</td>
      <td>1.159321e+09</td>
    </tr>
    <tr>
      <th>max</th>
      <td>6.000000</td>
      <td>7.000000</td>
      <td>1.000000</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>7.000000</td>
      <td>8.000000</td>
      <td>9.000000</td>
      <td>...</td>
      <td>-99.0</td>
      <td>25.000000</td>
      <td>35.000000</td>
      <td>13.000000</td>
      <td>6.000000</td>
      <td>1.000000</td>
      <td>7.000000</td>
      <td>6.500000</td>
      <td>11.000000</td>
      <td>1.159321e+09</td>
    </tr>
  </tbody>
</table>
<p>8 rows × 31 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries_raw.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>featurecla</th>
      <th>scalerank</th>
      <th>LABELRANK</th>
      <th>SOVEREIGNT</th>
      <th>SOV_A3</th>
      <th>ADM0_DIF</th>
      <th>LEVEL</th>
      <th>TYPE</th>
      <th>ADMIN</th>
      <th>ADM0_A3</th>
      <th>...</th>
      <th>NAME_KO</th>
      <th>NAME_NL</th>
      <th>NAME_PL</th>
      <th>NAME_PT</th>
      <th>NAME_RU</th>
      <th>NAME_SV</th>
      <th>NAME_TR</th>
      <th>NAME_VI</th>
      <th>NAME_ZH</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Admin-0 country</td>
      <td>1</td>
      <td>3</td>
      <td>Zimbabwe</td>
      <td>ZWE</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Zimbabwe</td>
      <td>ZWE</td>
      <td>...</td>
      <td>짐바브웨</td>
      <td>Zimbabwe</td>
      <td>Zimbabwe</td>
      <td>Zimbábue</td>
      <td>Зимбабве</td>
      <td>Zimbabwe</td>
      <td>Zimbabve</td>
      <td>Zimbabwe</td>
      <td>辛巴威</td>
      <td>POLYGON ((31.28789062500002 -22.40205078125001...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Admin-0 country</td>
      <td>1</td>
      <td>3</td>
      <td>Zambia</td>
      <td>ZMB</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Zambia</td>
      <td>ZMB</td>
      <td>...</td>
      <td>잠비아</td>
      <td>Zambia</td>
      <td>Zambia</td>
      <td>Zâmbia</td>
      <td>Замбия</td>
      <td>Zambia</td>
      <td>Zambiya</td>
      <td>Zambia</td>
      <td>赞比亚</td>
      <td>POLYGON ((30.39609375000001 -15.64306640625, 3...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Admin-0 country</td>
      <td>1</td>
      <td>3</td>
      <td>Yemen</td>
      <td>YEM</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Yemen</td>
      <td>YEM</td>
      <td>...</td>
      <td>예멘</td>
      <td>Jemen</td>
      <td>Jemen</td>
      <td>Iémen</td>
      <td>Йемен</td>
      <td>Jemen</td>
      <td>Yemen</td>
      <td>Yemen</td>
      <td>也门</td>
      <td>(POLYGON ((53.08564453125001 16.648388671875, ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Admin-0 country</td>
      <td>3</td>
      <td>2</td>
      <td>Vietnam</td>
      <td>VNM</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Vietnam</td>
      <td>VNM</td>
      <td>...</td>
      <td>베트남</td>
      <td>Vietnam</td>
      <td>Wietnam</td>
      <td>Vietname</td>
      <td>Вьетнам</td>
      <td>Vietnam</td>
      <td>Vietnam</td>
      <td>Việt Nam</td>
      <td>越南</td>
      <td>(POLYGON ((104.06396484375 10.3908203125, 104....</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Admin-0 country</td>
      <td>5</td>
      <td>3</td>
      <td>Venezuela</td>
      <td>VEN</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Venezuela</td>
      <td>VEN</td>
      <td>...</td>
      <td>베네수엘라</td>
      <td>Venezuela</td>
      <td>Wenezuela</td>
      <td>Venezuela</td>
      <td>Венесуэла</td>
      <td>Venezuela</td>
      <td>Venezuela</td>
      <td>Venezuela</td>
      <td>委內瑞拉</td>
      <td>(POLYGON ((-60.82119140624999 9.13837890624999...</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 95 columns</p>
</div></div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
</div>
<div class="section" id="Pandas-to-GeoPandas---the-GeoSeries-and-GeoDataFrame">
<h2>Pandas to GeoPandas - the GeoSeries and GeoDataFrame<a class="headerlink" href="#Pandas-to-GeoPandas---the-GeoSeries-and-GeoDataFrame" title="Permalink to this headline">¶</a></h2>
<p>Access and select a single column’s values such as the ADMIN names and assign the result to a variable (dot notation would work here too):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>admin_names = countries_raw[&#39;ADMIN&#39;]
admin_names
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>0                               Zimbabwe
1                                 Zambia
2                                  Yemen
3                                Vietnam
4                              Venezuela
5                                Vatican
6                                Vanuatu
7                             Uzbekistan
8                                Uruguay
9         Federated States of Micronesia
10                      Marshall Islands
11              Northern Mariana Islands
12          United States Virgin Islands
13                                  Guam
14                        American Samoa
15                           Puerto Rico
16              United States of America
17         South Georgia and the Islands
18        British Indian Ocean Territory
19                          Saint Helena
20                      Pitcairn Islands
21                              Anguilla
22                      Falkland Islands
23                        Cayman Islands
24                               Bermuda
25                British Virgin Islands
26              Turks and Caicos Islands
27                            Montserrat
28                                Jersey
29                              Guernsey
                     ...
211                             Botswana
212               Bosnia and Herzegovina
213                              Bolivia
214                               Bhutan
215                                Benin
216                               Belize
217                              Belgium
218                              Belarus
219                             Barbados
220                           Bangladesh
221                              Bahrain
222                          The Bahamas
223                           Azerbaijan
224                              Austria
225                            Australia
226             Indian Ocean Territories
227    Heard Island and McDonald Islands
228                       Norfolk Island
229          Ashmore and Cartier Islands
230                              Armenia
231                            Argentina
232                  Antigua and Barbuda
233                               Angola
234                              Andorra
235                              Algeria
236                              Albania
237                          Afghanistan
238                      Siachen Glacier
239                           Antarctica
240                         Sint Maarten
Name: ADMIN, Length: 241, dtype: object
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>type(admin_names)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>pandas.core.series.Series
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>geoms = countries_raw.geometry
type(geoms)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>geopandas.geoseries.GeoSeries
</pre></div>
</div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="GeoSeries-attributes">
<h2>GeoSeries attributes<a class="headerlink" href="#GeoSeries-attributes" title="Permalink to this headline">¶</a></h2>
<p>For a full list of all available attributes see the <a class="reference external" href="http://geopandas.org/reference.html">GeoSeries Reference</a></p>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="area">
<h2>area<a class="headerlink" href="#area" title="Permalink to this headline">¶</a></h2>
<p>List the area of all the countries in the <code class="docutils literal notranslate"><span class="pre">countries</span></code> dataset</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries_raw.area.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>0    33.389352
1    62.886921
2    38.204311
3    27.856863
4    74.594288
dtype: float64
</pre></div>
</div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="bounds">
<h2>bounds<a class="headerlink" href="#bounds" title="Permalink to this headline">¶</a></h2>
<p>tuple of max and min coordinates on each axs to each shape</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries_raw.bounds.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>minx</th>
      <th>miny</th>
      <th>maxx</th>
      <th>maxy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>25.224023</td>
      <td>-22.402051</td>
      <td>33.006738</td>
      <td>-15.643066</td>
    </tr>
    <tr>
      <th>1</th>
      <td>21.978906</td>
      <td>-18.041504</td>
      <td>33.661523</td>
      <td>-8.193652</td>
    </tr>
    <tr>
      <th>2</th>
      <td>42.549023</td>
      <td>12.318994</td>
      <td>54.511133</td>
      <td>18.996143</td>
    </tr>
    <tr>
      <th>3</th>
      <td>102.127441</td>
      <td>8.583252</td>
      <td>109.444922</td>
      <td>23.345215</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-73.366211</td>
      <td>0.687988</td>
      <td>-59.828906</td>
      <td>12.177881</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="area-bounds-is_valid-crs-and-centroid-use-examples">
<h2>area bounds is_valid crs and centroid use examples<a class="headerlink" href="#area-bounds-is_valid-crs-and-centroid-use-examples" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">area:</span></code> shape area (units of projection – see <a class="reference external" href="http://geopandas.org/projections.html">projections</a></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">bounds:</span></code> tuple of max and min coordinates on each axis for each shape</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">total_bounds:</span></code> tuple of max and min coordinates on each axis for entire GeoSeries</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">geom_type:</span></code> type of geometry.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">is_valid:</span></code> tests if coordinates make a shape that is reasonable geometric shape (according to this).</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>china = countries_raw.loc[countries_raw[&#39;ADMIN&#39;] == &#39;China&#39;]
print(&#39;area: &#39;, china.area)
print(&#39;bounds: &#39;, china.bounds)
print(&#39;Is valid?: &#39;, china.is_valid)
print(&#39;CRS: &#39;, china.crs)
print(&#39;centroid: &#39;, china.centroid)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
area:  195    950.981107
dtype: float64
bounds:            minx       miny        maxx       maxy
195  73.607324  18.218262  134.752344  53.555615
Is valid?:  195    True
dtype: bool
CRS:  {&#39;init&#39;: &#39;epsg:4326&#39;}
centroid:  195    POINT (103.8190731458241 36.56176537925268)
dtype: object
</pre></div></div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="Toward-mapping---a-basic-GeoPandas-workflow">
<h2>Toward mapping - a basic GeoPandas workflow<a class="headerlink" href="#Toward-mapping---a-basic-GeoPandas-workflow" title="Permalink to this headline">¶</a></h2>
<div class="section" id="supported-drivers-to-use-with-GeoDataFrame.tofile()">
<h3>supported drivers to use with GeoDataFrame.tofile()<a class="headerlink" href="#supported-drivers-to-use-with-GeoDataFrame.tofile()" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Writing the geo dataframe to a file is as simple as <code class="docutils literal notranslate"><span class="pre">GeoDataFrame.to_file()</span></code> This command will write the required Shapefiles to disk.</div>
<div class="line">For a list of available formats use:</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>fiona.supported_drivers
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>{&#39;AeronavFAA&#39;: &#39;r&#39;,
 &#39;ARCGEN&#39;: &#39;r&#39;,
 &#39;BNA&#39;: &#39;raw&#39;,
 &#39;DXF&#39;: &#39;raw&#39;,
 &#39;CSV&#39;: &#39;raw&#39;,
 &#39;OpenFileGDB&#39;: &#39;r&#39;,
 &#39;ESRI Shapefile&#39;: &#39;raw&#39;,
 &#39;GeoJSON&#39;: &#39;rw&#39;,
 &#39;GPKG&#39;: &#39;rw&#39;,
 &#39;GML&#39;: &#39;raw&#39;,
 &#39;GPX&#39;: &#39;raw&#39;,
 &#39;GPSTrackMaker&#39;: &#39;raw&#39;,
 &#39;Idrisi&#39;: &#39;r&#39;,
 &#39;MapInfo File&#39;: &#39;raw&#39;,
 &#39;DGN&#39;: &#39;raw&#39;,
 &#39;PCIDSK&#39;: &#39;r&#39;,
 &#39;S57&#39;: &#39;r&#39;,
 &#39;SEGY&#39;: &#39;r&#39;,
 &#39;SUA&#39;: &#39;r&#39;}
</pre></div>
</div>
</div>
</div>
<div class="section" id="write-a-shapefile">
<h3>write a shapefile<a class="headerlink" href="#write-a-shapefile" title="Permalink to this headline">¶</a></h3>
<p>The command: <code class="docutils literal notranslate"><span class="pre">countries_raw.to_file('shapes/countries/')</span></code> - Creates a new directory named countries within the current working directory - Writes the 3 required Shapefiles into that directory, as well as the very useful countries.shp encoding our CRS information and the less useful countires.cpg file</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries_raw.to_file(driver = &#39;ESRI Shapefile&#39;, filename= &#39;shapes/countries/countries.shp&#39;)
</pre></div>
</div>
</div>
</div>
<div class="section" id="reload-the-countries-dataframe-from-shapefile">
<h3>reload the countries dataframe from shapefile<a class="headerlink" href="#reload-the-countries-dataframe-from-shapefile" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries = gpd.read_file(&#39;./shapes/countries/countries.shp&#39;)
countries.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>featurecla</th>
      <th>scalerank</th>
      <th>LABELRANK</th>
      <th>SOVEREIGNT</th>
      <th>SOV_A3</th>
      <th>ADM0_DIF</th>
      <th>LEVEL</th>
      <th>TYPE</th>
      <th>ADMIN</th>
      <th>ADM0_A3</th>
      <th>...</th>
      <th>NAME_KO</th>
      <th>NAME_NL</th>
      <th>NAME_PL</th>
      <th>NAME_PT</th>
      <th>NAME_RU</th>
      <th>NAME_SV</th>
      <th>NAME_TR</th>
      <th>NAME_VI</th>
      <th>NAME_ZH</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
<p>0 rows × 95 columns</p>
</div></div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a> #### writing GeoJSON to file We can experiment with getting this to actually work (no luck so far for myself as its still unclear from the GeoDataFrame.to_file documentation what keyword arguments need to be supplied).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>if os.path.exists(&#39;data/countries.json&#39;):
  os.remove(&#39;data/countries.json&#39;)
</pre></div>
</div>
</div>
</div>
<div class="section" id="To-write-to-GeoJSON:">
<h3>To write to GeoJSON:<a class="headerlink" href="#To-write-to-GeoJSON:" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries.to_file(&#39;./data/countries.json&#39;, driver=&#39;GeoJSON&#39;)
</pre></div>
</div>
</div>
</div>
<div class="section" id="An-alternative-way-to-write-to-GeoJSON">
<h3>An alternative way to write to GeoJSON<a class="headerlink" href="#An-alternative-way-to-write-to-GeoJSON" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>with open(&#39;./data/countries.json&#39;, &#39;w&#39;) as f:
    f.write(countries_raw.to_json())
</pre></div>
</div>
</div>
</div>
<div class="section" id="reading-geojson-doesnt-work-for-files-created-using-to_file-method.-Alternate-write-file-reads?-Solution-below.">
<h3>reading geojson doesnt work for files created using <code class="docutils literal notranslate"><span class="pre">to_file</span></code> method. Alternate write file reads? Solution below.<a class="headerlink" href="#reading-geojson-doesnt-work-for-files-created-using-to_file-method.-Alternate-write-file-reads?-Solution-below." title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">The file created using the <code class="docutils literal notranslate"><span class="pre">to_file</span></code> method loads into geojson.io. However geojson.io won’t read the file created using the <code class="docutils literal notranslate"><span class="pre">write</span></code> method. Even more strange is the geojson.io won’t read the file created using the <code class="docutils literal notranslate"><span class="pre">write</span></code> method.</div>
<div class="line"><strong>Solution:</strong> edit the file created using the <code class="docutils literal notranslate"><span class="pre">to_file</span></code> method, removing the line <code class="docutils literal notranslate"><span class="pre">&quot;crs&quot;:</span> <span class="pre">{</span> <span class="pre">&quot;type&quot;:</span> <span class="pre">&quot;name&quot;,</span> <span class="pre">&quot;properties&quot;:</span> <span class="pre">{</span> <span class="pre">&quot;name&quot;:</span> <span class="pre">&quot;urn:ogc:def:crs:OGC:1.3:CRS84&quot;</span> <span class="pre">}</span> <span class="pre">},</span></code></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[57]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries = gpd.read_file(&#39;./data/countries.json&#39;)

countries.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[57]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>featurecla</th>
      <th>scalerank</th>
      <th>LABELRANK</th>
      <th>SOVEREIGNT</th>
      <th>SOV_A3</th>
      <th>ADM0_DIF</th>
      <th>LEVEL</th>
      <th>TYPE</th>
      <th>ADMIN</th>
      <th>...</th>
      <th>NAME_KO</th>
      <th>NAME_NL</th>
      <th>NAME_PL</th>
      <th>NAME_PT</th>
      <th>NAME_RU</th>
      <th>NAME_SV</th>
      <th>NAME_TR</th>
      <th>NAME_VI</th>
      <th>NAME_ZH</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>Admin-0 country</td>
      <td>1</td>
      <td>3</td>
      <td>Zimbabwe</td>
      <td>ZWE</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Zimbabwe</td>
      <td>...</td>
      <td>짐바브웨</td>
      <td>Zimbabwe</td>
      <td>Zimbabwe</td>
      <td>Zimbábue</td>
      <td>Зимбабве</td>
      <td>Zimbabwe</td>
      <td>Zimbabve</td>
      <td>Zimbabwe</td>
      <td>辛巴威</td>
      <td>POLYGON ((31.28789062500002 -22.40205078125001...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>Admin-0 country</td>
      <td>1</td>
      <td>3</td>
      <td>Zambia</td>
      <td>ZMB</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Zambia</td>
      <td>...</td>
      <td>잠비아</td>
      <td>Zambia</td>
      <td>Zambia</td>
      <td>Zâmbia</td>
      <td>Замбия</td>
      <td>Zambia</td>
      <td>Zambiya</td>
      <td>Zambia</td>
      <td>赞比亚</td>
      <td>POLYGON ((30.39609375000001 -15.64306640625, 3...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>Admin-0 country</td>
      <td>1</td>
      <td>3</td>
      <td>Yemen</td>
      <td>YEM</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Yemen</td>
      <td>...</td>
      <td>예멘</td>
      <td>Jemen</td>
      <td>Jemen</td>
      <td>Iémen</td>
      <td>Йемен</td>
      <td>Jemen</td>
      <td>Yemen</td>
      <td>Yemen</td>
      <td>也门</td>
      <td>(POLYGON ((53.08564453125001 16.648388671875, ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>Admin-0 country</td>
      <td>3</td>
      <td>2</td>
      <td>Vietnam</td>
      <td>VNM</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Vietnam</td>
      <td>...</td>
      <td>베트남</td>
      <td>Vietnam</td>
      <td>Wietnam</td>
      <td>Vietname</td>
      <td>Вьетнам</td>
      <td>Vietnam</td>
      <td>Vietnam</td>
      <td>Việt Nam</td>
      <td>越南</td>
      <td>(POLYGON ((104.06396484375 10.3908203125, 104....</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>Admin-0 country</td>
      <td>5</td>
      <td>3</td>
      <td>Venezuela</td>
      <td>VEN</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Venezuela</td>
      <td>...</td>
      <td>베네수엘라</td>
      <td>Venezuela</td>
      <td>Wenezuela</td>
      <td>Venezuela</td>
      <td>Венесуэла</td>
      <td>Venezuela</td>
      <td>Venezuela</td>
      <td>Venezuela</td>
      <td>委內瑞拉</td>
      <td>(POLYGON ((-60.82119140624999 9.13837890624999...</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 96 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries.crs
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>{&#39;init&#39;: &#39;epsg:4326&#39;}
</pre></div>
</div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
</div>
<div class="section" id="Plotting-geospatial-data">
<h2>Plotting geospatial data<a class="headerlink" href="#Plotting-geospatial-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="use-the-.plot()-method-to-produce-a-basic-visualization-of-our-dataset">
<h3>use the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method to produce a basic visualization of our dataset<a class="headerlink" href="#use-the-.plot()-method-to-produce-a-basic-visualization-of-our-dataset" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[59]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ax = countries.plot(figsize=(12,12));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_52_0.png" src="_images/geopandas-101_52_0.png" />
</div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="make-sub-selections-of-a-DataFrame">
<h3>make sub-selections of a DataFrame<a class="headerlink" href="#make-sub-selections-of-a-DataFrame" title="Permalink to this headline">¶</a></h3>
<p>For example, if we only want the countries with the <code class="docutils literal notranslate"><span class="pre">CONTINENT</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">Europe</span></code>, we can select those, assign them to a new variable, and even write them back out to disk as a GeoJSON:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>europe = countries.loc[countries[&#39;CONTINENT&#39;] == &#39;Europe&#39;]
europe.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>featurecla</th>
      <th>scalerank</th>
      <th>LABELRANK</th>
      <th>SOVEREIGNT</th>
      <th>SOV_A3</th>
      <th>ADM0_DIF</th>
      <th>LEVEL</th>
      <th>TYPE</th>
      <th>ADMIN</th>
      <th>...</th>
      <th>NAME_KO</th>
      <th>NAME_NL</th>
      <th>NAME_PL</th>
      <th>NAME_PT</th>
      <th>NAME_RU</th>
      <th>NAME_SV</th>
      <th>NAME_TR</th>
      <th>NAME_VI</th>
      <th>NAME_ZH</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>Admin-0 country</td>
      <td>6</td>
      <td>6</td>
      <td>Vatican</td>
      <td>VAT</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Vatican</td>
      <td>...</td>
      <td>바티칸 시국</td>
      <td>Vaticaanstad</td>
      <td>Watykan</td>
      <td>Vaticano</td>
      <td>Ватикан</td>
      <td>Vatikanstaten</td>
      <td>Vatikan</td>
      <td>Thành Vatican</td>
      <td>梵蒂冈</td>
      <td>POLYGON ((12.43916015625001 41.898388671875, 1...</td>
    </tr>
    <tr>
      <th>28</th>
      <td>28</td>
      <td>Admin-0 country</td>
      <td>4</td>
      <td>6</td>
      <td>United Kingdom</td>
      <td>GB1</td>
      <td>1</td>
      <td>2</td>
      <td>Country</td>
      <td>Jersey</td>
      <td>...</td>
      <td>저지 섬</td>
      <td>Jersey</td>
      <td>Jersey</td>
      <td>Jersey</td>
      <td>Джерси</td>
      <td>Jersey</td>
      <td>Jersey</td>
      <td>Jersey</td>
      <td>澤西島</td>
      <td>POLYGON ((-2.018652343749977 49.23125, -2.0099...</td>
    </tr>
    <tr>
      <th>29</th>
      <td>29</td>
      <td>Admin-0 country</td>
      <td>4</td>
      <td>6</td>
      <td>United Kingdom</td>
      <td>GB1</td>
      <td>1</td>
      <td>2</td>
      <td>Country</td>
      <td>Guernsey</td>
      <td>...</td>
      <td>건지 섬</td>
      <td>Guernsey</td>
      <td>Guernsey</td>
      <td>Guernsey</td>
      <td>Гернси</td>
      <td>Guernsey</td>
      <td>Guernsey</td>
      <td>Guernsey</td>
      <td>根西岛</td>
      <td>POLYGON ((-2.512304687499977 49.49453124999999...</td>
    </tr>
    <tr>
      <th>30</th>
      <td>30</td>
      <td>Admin-0 country</td>
      <td>3</td>
      <td>6</td>
      <td>United Kingdom</td>
      <td>GB1</td>
      <td>1</td>
      <td>2</td>
      <td>Country</td>
      <td>Isle of Man</td>
      <td>...</td>
      <td>맨 섬</td>
      <td>Man</td>
      <td>Wyspa Man</td>
      <td>Ilha de Man</td>
      <td>остров Мэн</td>
      <td>Isle of Man</td>
      <td>Man Adası</td>
      <td>Đảo Man</td>
      <td>马恩岛</td>
      <td>POLYGON ((-4.412060546874983 54.1853515625, -4...</td>
    </tr>
    <tr>
      <th>31</th>
      <td>31</td>
      <td>Admin-0 country</td>
      <td>1</td>
      <td>2</td>
      <td>United Kingdom</td>
      <td>GB1</td>
      <td>1</td>
      <td>2</td>
      <td>Country</td>
      <td>United Kingdom</td>
      <td>...</td>
      <td>영국</td>
      <td>Verenigd Koninkrijk</td>
      <td>Wielka Brytania</td>
      <td>Reino Unido</td>
      <td>Великобритания</td>
      <td>Storbritannien</td>
      <td>Birleşik Krallık</td>
      <td>Vương quốc Liên hiệp Anh và Bắc Ireland</td>
      <td>英国</td>
      <td>(POLYGON ((-2.667675781249983 51.622998046875,...</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 96 columns</p>
</div></div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="write-sub-selection-to-shapefile">
<h3>write sub-selection to shapefile<a class="headerlink" href="#write-sub-selection-to-shapefile" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>europe.to_file(driver = &#39;ESRI Shapefile&#39;, filename= &#39;shapes/europe/europe.shp&#39;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/Users/mark/anaconda3/envs/sandbox/lib/python3.6/site-packages/geopandas/io/file.py:108: FionaDeprecationWarning: Use fiona.Env() instead.
  with fiona.drivers():
</pre></div></div>
</div>
<p>#### read sub-selection from shapefile</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[61]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>europe = gpd.read_file(&#39;./shapes/europe/europe.shp&#39;)
europe.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[61]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>featurecla</th>
      <th>scalerank</th>
      <th>LABELRANK</th>
      <th>SOVEREIGNT</th>
      <th>SOV_A3</th>
      <th>ADM0_DIF</th>
      <th>LEVEL</th>
      <th>TYPE</th>
      <th>ADMIN</th>
      <th>ADM0_A3</th>
      <th>...</th>
      <th>NAME_SV</th>
      <th>NAME_TR</th>
      <th>NAME_VI</th>
      <th>NAME_ZH</th>
      <th>FORMAL_FR</th>
      <th>NAME_ALT</th>
      <th>NOTE_ADM0</th>
      <th>NOTE_BRK</th>
      <th>BRK_GROUP</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Admin-0 country</td>
      <td>6</td>
      <td>6</td>
      <td>Vatican</td>
      <td>VAT</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>Vatican</td>
      <td>VAT</td>
      <td>...</td>
      <td>Vatikanstaten</td>
      <td>Vatikan</td>
      <td>Thành Vatican</td>
      <td>???</td>
      <td>None</td>
      <td>Holy See</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>POLYGON ((12.43916015625001 41.898388671875, 1...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Admin-0 country</td>
      <td>4</td>
      <td>6</td>
      <td>United Kingdom</td>
      <td>GB1</td>
      <td>1</td>
      <td>2</td>
      <td>Country</td>
      <td>Jersey</td>
      <td>JEY</td>
      <td>...</td>
      <td>Jersey</td>
      <td>Jersey</td>
      <td>Jersey</td>
      <td>???</td>
      <td>None</td>
      <td>None</td>
      <td>U.K. crown dependency</td>
      <td>None</td>
      <td>Channel Islands</td>
      <td>POLYGON ((-2.018652343749977 49.23125, -2.0099...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Admin-0 country</td>
      <td>4</td>
      <td>6</td>
      <td>United Kingdom</td>
      <td>GB1</td>
      <td>1</td>
      <td>2</td>
      <td>Country</td>
      <td>Guernsey</td>
      <td>GGY</td>
      <td>...</td>
      <td>Guernsey</td>
      <td>Guernsey</td>
      <td>Guernsey</td>
      <td>???</td>
      <td>None</td>
      <td>None</td>
      <td>U.K. crown dependency</td>
      <td>None</td>
      <td>Channel Islands</td>
      <td>POLYGON ((-2.512304687499977 49.49453125, -2.5...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Admin-0 country</td>
      <td>3</td>
      <td>6</td>
      <td>United Kingdom</td>
      <td>GB1</td>
      <td>1</td>
      <td>2</td>
      <td>Country</td>
      <td>Isle of Man</td>
      <td>IMN</td>
      <td>...</td>
      <td>Isle of Man</td>
      <td>Man Adas?</td>
      <td>??o Man</td>
      <td>???</td>
      <td>None</td>
      <td>None</td>
      <td>U.K. crown dependency</td>
      <td>None</td>
      <td>None</td>
      <td>POLYGON ((-4.412060546874983 54.1853515625, -4...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Admin-0 country</td>
      <td>1</td>
      <td>2</td>
      <td>United Kingdom</td>
      <td>GB1</td>
      <td>1</td>
      <td>2</td>
      <td>Country</td>
      <td>United Kingdom</td>
      <td>GBR</td>
      <td>...</td>
      <td>Storbritannien</td>
      <td>Birle?ik Krall?k</td>
      <td>V??ng qu?c Liên hi?p Anh và B?c Ireland</td>
      <td>??</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>(POLYGON ((-2.667675781249983 51.622998046875,...</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 95 columns</p>
</div></div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a> #### check if json data file exist and delete if exist</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[62]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>if os.path.exists(&#39;data/europe.json&#39;):
  os.remove(&#39;data/europe.json&#39;)
</pre></div>
</div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="write-sub-selection-to-geojson">
<h3>write sub-selection to geojson<a class="headerlink" href="#write-sub-selection-to-geojson" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>europe.to_file(&#39;./data/europe.json&#39;, driver=&#39;GeoJSON&#39;)
#Alternative write method -&gt; with
open(&#39;data/europe.json&#39;, &#39;w&#39;) as f: f.write(europe.to_json())
</pre></div>
</div>
</div>
</div>
<div class="section" id="read-the-shapefile">
<h3>read the shapefile<a class="headerlink" href="#read-the-shapefile" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[65]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>europe = gpd.read_file(&#39;data/europe.json&#39;)
europe.plot(figsize=(15,15));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_67_0.png" src="_images/geopandas-101_67_0.png" />
</div>
</div>
<p>The output is not a particularly helpful visual (pretending that our intent is to focus on continental Europe):</p>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="set-X-and-Y-axis-limits-with-Matplotlib">
<h3>set X and Y axis limits with Matplotlib<a class="headerlink" href="#set-X-and-Y-axis-limits-with-Matplotlib" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[66]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ax = europe.plot(figsize=(15,15))
ax.set(xlim=(-15,45), ylim=(30,73));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_71_0.png" src="_images/geopandas-101_71_0.png" />
</div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
<div class="section" id="Adjusting-and-managing-projections">
<h4>Adjusting and managing projections<a class="headerlink" href="#Adjusting-and-managing-projections" title="Permalink to this headline">¶</a></h4>
<p><strong>Choose a country in Europe and get the projection</strong> from <a class="reference external" href="https://epsg.io/">EPSG.io</a> This web site allows one to search for various map projections to obtain both their EPSG code (which GeoPandas handles as the preferred code) as well as the PROJ.4 definition.</p>
</div>
</div>
<div class="section" id="set-dataframe-to-new-projection">
<h3>set dataframe to new projection<a class="headerlink" href="#set-dataframe-to-new-projection" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[67]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>europe.to_crs(epsg=3763, inplace=True)
europe.crs
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[67]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>{&#39;init&#39;: &#39;epsg:3763&#39;, &#39;no_defs&#39;: True}
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[68]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>europe.plot(figsize=(15,15));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_77_0.png" src="_images/geopandas-101_77_0.png" />
</div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a> #### create a new GeoDataFrame of Portugal by slicing it from the europe GeoDataFrame (and remove Portugal from europe):</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[69]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>portugal = europe[europe[&#39;ADMIN&#39;] == &quot;Portugal&quot;]
europe = europe[europe[&#39;ADMIN&#39;] != &quot;Portugal&quot;]
</pre></div>
</div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="plot-Portugal">
<h3>plot Portugal<a class="headerlink" href="#plot-Portugal" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>portugal.bounds
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>minx</th>
      <th>miny</th>
      <th>maxx</th>
      <th>maxy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>15</th>
      <td>-2.003758e+06</td>
      <td>-745274.483292</td>
      <td>160288.077944</td>
      <td>274212.075788</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>portugal.plot(figsize=(15,15));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_83_0.png" src="_images/geopandas-101_83_0.png" />
</div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="add-the-Europe-GeoDataFrame-as-the-basemap">
<h3>add the Europe GeoDataFrame as the basemap<a class="headerlink" href="#add-the-Europe-GeoDataFrame-as-the-basemap" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">plot Portugal on top of it, using some basic color properties to help create figure-ground</div>
<div class="line">adjust the axis limits using values of meters</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>base = europe.plot(figsize=(12,12), edgecolor=&#39;white&#39;, color=&#39;#e9e9e9&#39;)
base.set(xlim=(-300000,1000000), ylim=(-500000, 500000))
portugal.plot(ax=base, color=&#39;#5496c2&#39;);
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_86_0.png" src="_images/geopandas-101_86_0.png" />
</div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
<div class="section" id="Adding-a-background-tile-map-to-plots">
<h4>Adding a background tile map to plots<a class="headerlink" href="#Adding-a-background-tile-map-to-plots" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://geopandas.org/gallery/plotting_basemap_background.html">GeoPandas 0.4.0 documentation</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>%matplotlib inline

import pandas as pd
import geopandas as gpd
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="read-data">
<h3>read data<a class="headerlink" href="#read-data" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>europe = gpd.read_file(&#39;data/europe.json&#39;)
</pre></div>
</div>
</div>
</div>
<div class="section" id="set-dataframe-to-a-target-area-(Portugal-in-this-example)">
<h3>set dataframe to a target area (Portugal in this example)<a class="headerlink" href="#set-dataframe-to-a-target-area-(Portugal-in-this-example)" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>portugal = europe[europe[&#39;ADMIN&#39;] == &quot;Portugal&quot;]
</pre></div>
</div>
</div>
</div>
<div class="section" id="change-crs-to-web-mercator">
<h3>change crs to web mercator<a class="headerlink" href="#change-crs-to-web-mercator" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>portugal.to_crs(epsg=3857, inplace=True)
portugal.crs
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>{&#39;init&#39;: &#39;epsg:3857&#39;, &#39;no_defs&#39;: True}
</pre></div>
</div>
</div>
</div>
<div class="section" id="examine-the-area-available-for-portugal">
<h3>examine the area available for portugal<a class="headerlink" href="#examine-the-area-available-for-portugal" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>portugal.plot(figsize=(10,10));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_97_0.png" src="_images/geopandas-101_97_0.png" />
</div>
</div>
</div>
<div class="section" id="contextily-helper-function">
<h3>contextily helper function<a class="headerlink" href="#contextily-helper-function" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Define a small helper function that uses <code class="docutils literal notranslate"><span class="pre">contextily</span> <span class="pre">&lt;https://github.com/darribas/contextily&gt;</span></code></div>
<div class="line">to add a map as background to an existing plot:</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>import contextily as ctx

def add_basemap(ax, zoom, url=&#39;http://tile.stamen.com/terrain/tileZ/tileX/tileY.png&#39;):
    xmin, xmax, ymin, ymax = ax.axis()
    basemap, extent = ctx.bounds2img(xmin, ymin, xmax, ymax, zoom=zoom, url=url)
    ax.imshow(basemap, extent=extent, interpolation=&#39;bilinear&#39;)
    # restore original x/y limits
    ax.axis((xmin, xmax, ymin, ymax))
</pre></div>
</div>
</div>
</div>
<div class="section" id="a-large-area-will-take-a-longer-time-to-load-the-basemap">
<h3>a large area will take a longer time to load the basemap<a class="headerlink" href="#a-large-area-will-take-a-longer-time-to-load-the-basemap" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>base = portugal.plot(figsize=(10, 15), alpha=0.4, edgecolor=&#39;k&#39;)
base.set(xlim=(-1500000,-500000), ylim=(4400000, 5200000))
add_basemap(ax=base, zoom=11)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_101_0.png" src="_images/geopandas-101_101_0.png" />
</div>
</div>
</div>
<div class="section" id="select-a-smaller-area">
<h3>select a smaller area<a class="headerlink" href="#select-a-smaller-area" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>base = portugal.plot(figsize=(10,10), edgecolor=&#39;white&#39;, color=&#39;#e9e9e9&#39;)
base.set(xlim=(-1100000,-900000), ylim=(4600000, 4760000))
portugal.plot(ax=base, color=&#39;#5496c2&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1a16624b00&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_103_1.png" src="_images/geopandas-101_103_1.png" />
</div>
</div>
</div>
<div class="section" id="add-in-the-basemap">
<h3>add in the basemap<a class="headerlink" href="#add-in-the-basemap" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>base = portugal.plot(figsize=(10, 15), alpha=0.09, edgecolor=&#39;k&#39;)
base.set(xlim=(-1060000,-991950), ylim=(4660000, 4705000))
add_basemap(ax=base, zoom=11)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_105_0.png" src="_images/geopandas-101_105_0.png" />
</div>
</div>
</div>
<div class="section" id="Portugual---the-island-of-Madeira">
<h3>Portugual - the island of <a class="reference external" href="https://en.wikipedia.org/wiki/Madeira">Madeira</a><a class="headerlink" href="#Portugual---the-island-of-Madeira" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>base = portugal.plot(figsize=(10, 10), alpha=0.2, edgecolor=&#39;k&#39;)
base.set(xlim=(-1930000,-1850000), ylim=(3840000, 3881000))
add_basemap(ax=base, zoom=10)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_107_0.png" src="_images/geopandas-101_107_0.png" />
</div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
<div class="section" id="Plotting-with-Geoplot-and-GeoPandas">
<h4>Plotting with Geoplot and GeoPandas<a class="headerlink" href="#Plotting-with-Geoplot-and-GeoPandas" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://geopandas.org/gallery/plotting_with_geoplot.html#sphx-glr-gallery-plotting-with-geoplot-py">GeoPandas 0.4.0 documentation</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries = gpd.read_file(&#39;data/countries.json&#39;)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="use-size-as-a-visual-variable-using-Cartogram">
<h3>use size as a visual variable using Cartogram<a class="headerlink" href="#use-size-as-a-visual-variable-using-Cartogram" title="Permalink to this headline">¶</a></h3>
<p>Here are population estimates for countries in Africa.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>geoplot.cartogram(countries[countries[&#39;CONTINENT&#39;] == &#39;Africa&#39;], scale=&#39;POP_EST&#39;, limits=(0.2, 1), figsize=(7, 8));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_112_0.png" src="_images/geopandas-101_112_0.png" />
</div>
</div>
<p>#### use color as a visual variable - specify choropleth Here we sort population estimate by country into five buckets by color.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[70]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>geoplot.choropleth(countries[countries[&#39;CONTINENT&#39;] == &#39;Africa&#39;], hue=&#39;POP_EST&#39;, cmap=&#39;Greens&#39;,  linewidth=0.5, k=None,figsize=(7,8), legend=True);
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_114_0.png" src="_images/geopandas-101_114_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[57]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>geoplot.choropleth(countries[countries[&#39;CONTINENT&#39;] == &#39;Africa&#39;], hue=&#39;POP_EST&#39;, projection=gcrs.AlbersEqualArea(),
                cmap=&#39;Greens&#39;, linewidth=0.5, k=None, legend=True)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[57]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;cartopy.mpl.geoaxes.GeoAxesSubplot at 0x1a29084208&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_115_1.png" src="_images/geopandas-101_115_1.png" />
</div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
<div class="section" id="Re-project-data-into-any-of-the-map-projections-provided-by-CartoPy">
<h4>Re-project data into any of the map projections provided by CartoPy<a class="headerlink" href="#Re-project-data-into-any-of-the-map-projections-provided-by-CartoPy" title="Permalink to this headline">¶</a></h4>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[73]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>import geoplot
import geopandas

path = geopandas.datasets.get_path(&#39;naturalearth_lowres&#39;)
df = geopandas.read_file(path)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="Start-out-by-replicating-the-basic-GeoPandas-world-plot-using-Geoplot.">
<h3>Start out by replicating the basic GeoPandas world plot using Geoplot.<a class="headerlink" href="#Start-out-by-replicating-the-basic-GeoPandas-world-plot-using-Geoplot." title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[74]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>geoplot.polyplot(df, figsize=(12,6));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_120_0.png" src="_images/geopandas-101_120_0.png" />
</div>
</div>
</div>
<div class="section" id="Orthographic">
<h3>Orthographic<a class="headerlink" href="#Orthographic" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[75]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>import geoplot.crs as gcrs
ax = geoplot.polyplot(df, projection=gcrs.Orthographic(), figsize=(12,6))
ax.set_global()
ax.outline_patch.set_visible(True)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_122_0.png" src="_images/geopandas-101_122_0.png" />
</div>
</div>
</div>
<div class="section" id="PlateCarree">
<h3>PlateCarree<a class="headerlink" href="#PlateCarree" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[76]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>import geoplot.crs as gcrs
ax = geoplot.polyplot(df, projection=gcrs.PlateCarree(), figsize=(12, 6))

ax.coastlines(resolution=&#39;110m&#39;)
ax.gridlines()
ax.set_global()
ax.outline_patch.set_visible(True);
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_124_0.png" src="_images/geopandas-101_124_0.png" />
</div>
</div>
</div>
<div class="section" id="PlateCarree-on-180-longitude">
<h3>PlateCarree on 180 longitude<a class="headerlink" href="#PlateCarree-on-180-longitude" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[77]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ax = geoplot.polyplot(df, projection=gcrs.PlateCarree(central_longitude=180), figsize=(12, 6))
ax.coastlines(resolution=&#39;110m&#39;)
ax.gridlines()
ax.set_global()
ax.outline_patch.set_visible(True);
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/Users/mark/anaconda3/envs/sandbox/lib/python3.6/site-packages/cartopy/mpl/geoaxes.py:704: UserWarning: Attempting to set identical left==right results
in singular transformations; automatically expanding.
left=0.0, right=0.0
  self.set_xlim([x1, x2])
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_126_1.png" src="_images/geopandas-101_126_1.png" />
</div>
</div>
</div>
<div class="section" id="AlbersEqualArea">
<h3>AlbersEqualArea<a class="headerlink" href="#AlbersEqualArea" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ax = geoplot.polyplot(df, projection=gcrs.AlbersEqualArea(), figsize=(12, 6))
ax.coastlines(resolution=&#39;110m&#39;)
ax.gridlines()
ax.set_global()
ax.outline_patch.set_visible(True);
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_128_0.png" src="_images/geopandas-101_128_0.png" />
</div>
</div>
</div>
<div class="section" id="Robinson">
<h3>Robinson<a class="headerlink" href="#Robinson" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ax = geoplot.polyplot(df, projection=gcrs.Robinson(), figsize=(12, 6))
ax.coastlines(resolution=&#39;110m&#39;)
ax.gridlines()
ax.set_global()
ax.outline_patch.set_visible(True);
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_130_0.png" src="_images/geopandas-101_130_0.png" />
</div>
</div>
<p><strong>see more</strong><a class="reference external" href="http://scitools.org.uk/cartopy/docs/latest/crs/projections.html">here</a></p>
<hr class="docutils" />
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
<div class="section" id="Aggregate-geometric-features">
<h4>Aggregate geometric features<a class="headerlink" href="#Aggregate-geometric-features" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://geopandas.org/aggregation_with_dissolve.html">GeoPandas 0.4.0 documentation</a></p>
</div>
</div>
<div class="section" id="Geopandas-dissolve-function">
<h3>Geopandas <code class="docutils literal notranslate"><span class="pre">dissolve</span></code> function<a class="headerlink" href="#Geopandas-dissolve-function" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">dissolve can be thought of as doing three things:</div>
<div class="line">(a) it dissolves all the geometries within a given group together into a single geometric feature (using the unary_union method), and</div>
<div class="line">(b) it aggregates all the rows of data in a group using groupby.aggregate(), and</div>
<div class="line">(c) it combines those two results.</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>%matplotlib inline

import pandas as pd
import geopandas as gpd
import matplotlib.pyplot as plt
import pysal as ps
plt.style.use(&#39;classic&#39;)
</pre></div>
</div>
</div>
</div>
<div class="section" id="read-in-the-countries-json-file-made-earlier">
<h3>read in the countries json file made earlier<a class="headerlink" href="#read-in-the-countries-json-file-made-earlier" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[59]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>countries = gpd.read_file(&#39;./data/countries.json&#39;)
</pre></div>
</div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="aggregate-the-geodataframe-by-continents">
<h3>aggregate the geodataframe by continents<a class="headerlink" href="#aggregate-the-geodataframe-by-continents" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>continents = countries.dissolve(by=&#39;CONTINENT&#39;)
continents  # display the entire dataframe
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry</th>
      <th>id</th>
      <th>featurecla</th>
      <th>scalerank</th>
      <th>LABELRANK</th>
      <th>SOVEREIGNT</th>
      <th>SOV_A3</th>
      <th>ADM0_DIF</th>
      <th>LEVEL</th>
      <th>TYPE</th>
      <th>...</th>
      <th>NAME_JA</th>
      <th>NAME_KO</th>
      <th>NAME_NL</th>
      <th>NAME_PL</th>
      <th>NAME_PT</th>
      <th>NAME_RU</th>
      <th>NAME_SV</th>
      <th>NAME_TR</th>
      <th>NAME_VI</th>
      <th>NAME_ZH</th>
    </tr>
    <tr>
      <th>CONTINENT</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Africa</th>
      <td>(POLYGON ((37.85693359375 -46.94423828124999, ...</td>
      <td>0</td>
      <td>Admin-0 country</td>
      <td>1</td>
      <td>3</td>
      <td>Zimbabwe</td>
      <td>ZWE</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>...</td>
      <td>ジンバブエ</td>
      <td>짐바브웨</td>
      <td>Zimbabwe</td>
      <td>Zimbabwe</td>
      <td>Zimbábue</td>
      <td>Зимбабве</td>
      <td>Zimbabwe</td>
      <td>Zimbabve</td>
      <td>Zimbabwe</td>
      <td>辛巴威</td>
    </tr>
    <tr>
      <th>Antarctica</th>
      <td>(POLYGON ((-147.58828125 -76.64980468750002, -...</td>
      <td>239</td>
      <td>Admin-0 country</td>
      <td>3</td>
      <td>4</td>
      <td>Antarctica</td>
      <td>ATA</td>
      <td>0</td>
      <td>2</td>
      <td>Indeterminate</td>
      <td>...</td>
      <td>南極大陸</td>
      <td>남극</td>
      <td>Antarctica</td>
      <td>Antarktyda</td>
      <td>Antártida</td>
      <td>Антарктида</td>
      <td>Antarktis</td>
      <td>Antarktika</td>
      <td>Châu Nam Cực</td>
      <td>南极洲</td>
    </tr>
    <tr>
      <th>Asia</th>
      <td>(POLYGON ((96.91826171874999 -12.194140625, 96...</td>
      <td>2</td>
      <td>Admin-0 country</td>
      <td>1</td>
      <td>3</td>
      <td>Yemen</td>
      <td>YEM</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>...</td>
      <td>イエメン</td>
      <td>예멘</td>
      <td>Jemen</td>
      <td>Jemen</td>
      <td>Iémen</td>
      <td>Йемен</td>
      <td>Jemen</td>
      <td>Yemen</td>
      <td>Yemen</td>
      <td>也门</td>
    </tr>
    <tr>
      <th>Europe</th>
      <td>(POLYGON ((55.79736328125 -21.33935546875, 55....</td>
      <td>5</td>
      <td>Admin-0 country</td>
      <td>6</td>
      <td>6</td>
      <td>Vatican</td>
      <td>VAT</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>...</td>
      <td>バチカン</td>
      <td>바티칸 시국</td>
      <td>Vaticaanstad</td>
      <td>Watykan</td>
      <td>Vaticano</td>
      <td>Ватикан</td>
      <td>Vatikanstaten</td>
      <td>Vatikan</td>
      <td>Thành Vatican</td>
      <td>梵蒂冈</td>
    </tr>
    <tr>
      <th>North America</th>
      <td>(POLYGON ((-81.603271484375 7.332812499999989,...</td>
      <td>12</td>
      <td>Admin-0 country</td>
      <td>3</td>
      <td>6</td>
      <td>United States of America</td>
      <td>US1</td>
      <td>1</td>
      <td>2</td>
      <td>Dependency</td>
      <td>...</td>
      <td>アメリカ領ヴァージン諸島</td>
      <td>미국령 버진아일랜드</td>
      <td>Amerikaanse Maagdeneilanden</td>
      <td>Wyspy Dziewicze Stanów Zjednoczonych</td>
      <td>Ilhas Virgens Americanas</td>
      <td>Американские Виргинские острова</td>
      <td>Amerikanska Jungfruöarna</td>
      <td>ABD Virjin Adaları</td>
      <td>Quần đảo Virgin thuộc Mỹ</td>
      <td>美屬維爾京群島</td>
    </tr>
    <tr>
      <th>Oceania</th>
      <td>(POLYGON ((158.87880859375 -54.70976562500002,...</td>
      <td>6</td>
      <td>Admin-0 country</td>
      <td>1</td>
      <td>4</td>
      <td>Vanuatu</td>
      <td>VUT</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>...</td>
      <td>バヌアツ</td>
      <td>바누아투</td>
      <td>Vanuatu</td>
      <td>Vanuatu</td>
      <td>Vanuatu</td>
      <td>Вануату</td>
      <td>Vanuatu</td>
      <td>Vanuatu</td>
      <td>Vanuatu</td>
      <td>萬那杜</td>
    </tr>
    <tr>
      <th>Seven seas (open ocean)</th>
      <td>(POLYGON ((-26.26411132812498 -58.435156250000...</td>
      <td>17</td>
      <td>Admin-0 country</td>
      <td>3</td>
      <td>4</td>
      <td>United Kingdom</td>
      <td>GB1</td>
      <td>1</td>
      <td>2</td>
      <td>Dependency</td>
      <td>...</td>
      <td>サウスジョージア・サウスサンドウィッチ諸島</td>
      <td>사우스조지아 사우스샌드위치 제도</td>
      <td>Zuid-Georgia en de Zuidelijke Sandwicheilanden</td>
      <td>Georgia Południowa i Sandwich Południowy</td>
      <td>Ilhas Geórgia do Sul e Sandwich do Sul</td>
      <td>Южная Георгия и Южные Сандвичевы острова</td>
      <td>Sydgeorgien och Sydsandwichöarna</td>
      <td>Güney Georgia ve Güney Sandwich Adaları</td>
      <td>Nam Georgia và Quần đảo Nam Sandwich</td>
      <td>南喬治亞島與南桑威奇群島</td>
    </tr>
    <tr>
      <th>South America</th>
      <td>(POLYGON ((-67.5751953125 -55.8896484375, -67....</td>
      <td>4</td>
      <td>Admin-0 country</td>
      <td>5</td>
      <td>3</td>
      <td>Venezuela</td>
      <td>VEN</td>
      <td>0</td>
      <td>2</td>
      <td>Sovereign country</td>
      <td>...</td>
      <td>ベネズエラ</td>
      <td>베네수엘라</td>
      <td>Venezuela</td>
      <td>Wenezuela</td>
      <td>Venezuela</td>
      <td>Венесуэла</td>
      <td>Venezuela</td>
      <td>Venezuela</td>
      <td>Venezuela</td>
      <td>委內瑞拉</td>
    </tr>
  </tbody>
</table>
<p>8 rows × 95 columns</p>
</div></div>
</div>
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
<div class="section" id="Plot-the-new-geodataframe">
<h3>Plot the new geodataframe<a class="headerlink" href="#Plot-the-new-geodataframe" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[61]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>continents.plot(figsize=(12, 6));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_144_0.png" src="_images/geopandas-101_144_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Add-color-based-on-the-pop_est-for-each-continent-display-legend-to-the-right-of-the-plot">
<h2>Add color based on the pop_est for each continent display legend to the right of the plot<a class="headerlink" href="#Add-color-based-on-the-pop_est-for-each-continent-display-legend-to-the-right-of-the-plot" title="Permalink to this headline">¶</a></h2>
<p>The way color maps are scaled can also be manipulated with the <code class="docutils literal notranslate"><span class="pre">scheme</span></code> option (if you have pysal installed). The <code class="docutils literal notranslate"><span class="pre">scheme</span></code> option, used below, can be set to ‘equal_interval’, ‘quantiles’ or ‘percentiles’.</p>
<p>Colors are set with the <code class="docutils literal notranslate"><span class="pre">cmap</span></code> option <a class="reference external" href="./colormap-reference-cmap.ipynb">more info in this notebook</a></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[62]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>fig, ax = plt.subplots(1, figsize=(12,6))
continents.plot(ax=ax, column = &#39;POP_EST&#39;, cmap=&#39;YlOrRd&#39;, alpha=1, legend=True,
                            legend_kwds={&#39;loc&#39;: &#39;upper left&#39;,
                                         &#39;bbox_to_anchor&#39;: (1.0, 0.8, 0.2, 0.2),
                                         &#39;title&#39;: &#39;Total Population&#39;,
                                         &#39;fontsize&#39;: 14,
                                         &#39;frameon&#39;: False, });
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_147_0.png" src="_images/geopandas-101_147_0.png" />
</div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>from shapely.geometry import Point
import pandas as pd
import geopandas as gpd
</pre></div>
</div>
</div>
</div>
<div class="section" id="From-longitudes-and-latitudes">
<h2>From longitudes and latitudes<a class="headerlink" href="#From-longitudes-and-latitudes" title="Permalink to this headline">¶</a></h2>
<p>First, let’s consider a DataFrame containing residences and their respective longitudes and latitudes.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>import zipfile
# https://support.spatialkey.com/spatialkey-sample-csv-data/
zf = zipfile.ZipFile(&#39;./data/FL_insurance_sample.csv.zip&#39;)
df = pd.read_csv(zf.open(&#39;FL_insurance_sample.csv&#39;))
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>df.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>policyID</th>
      <th>statecode</th>
      <th>county</th>
      <th>eq_site_limit</th>
      <th>hu_site_limit</th>
      <th>fl_site_limit</th>
      <th>fr_site_limit</th>
      <th>tiv_2011</th>
      <th>tiv_2012</th>
      <th>eq_site_deductible</th>
      <th>hu_site_deductible</th>
      <th>fl_site_deductible</th>
      <th>fr_site_deductible</th>
      <th>point_latitude</th>
      <th>point_longitude</th>
      <th>line</th>
      <th>construction</th>
      <th>point_granularity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>119736</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>498960.0</td>
      <td>498960.00</td>
      <td>498960.0</td>
      <td>498960.0</td>
      <td>498960.00</td>
      <td>792148.90</td>
      <td>0.0</td>
      <td>9979.2</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.102261</td>
      <td>-81.711777</td>
      <td>Residential</td>
      <td>Masonry</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>448094</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>1322376.3</td>
      <td>1322376.30</td>
      <td>1322376.3</td>
      <td>1322376.3</td>
      <td>1322376.30</td>
      <td>1438163.57</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.063936</td>
      <td>-81.707664</td>
      <td>Residential</td>
      <td>Masonry</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>206893</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>190724.4</td>
      <td>190724.40</td>
      <td>190724.4</td>
      <td>190724.4</td>
      <td>190724.40</td>
      <td>192476.78</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.089579</td>
      <td>-81.700455</td>
      <td>Residential</td>
      <td>Wood</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>333743</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>0.0</td>
      <td>79520.76</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>79520.76</td>
      <td>86854.48</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.063236</td>
      <td>-81.707703</td>
      <td>Residential</td>
      <td>Wood</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>172534</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>0.0</td>
      <td>254281.50</td>
      <td>0.0</td>
      <td>254281.5</td>
      <td>254281.50</td>
      <td>246144.49</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.060614</td>
      <td>-81.702675</td>
      <td>Residential</td>
      <td>Wood</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="section" id="A-GeoDataFrame-needs-a-shapely-object">
<h3>A GeoDataFrame needs a shapely object<a class="headerlink" href="#A-GeoDataFrame-needs-a-shapely-object" title="Permalink to this headline">¶</a></h3>
<p><strong>Create a new column Coordinates as a tuple of Longitude and Latitude :</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>df[&#39;Coordinates&#39;] = list(zip(df.point_longitude, df.point_latitude))
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>df[&#39;Coordinates&#39;].head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>0                     (-81.711777, 30.102261)
1    (-81.70766400000001, 30.063935999999998)
2            (-81.700455, 30.089578999999997)
3             (-81.70770300000001, 30.063236)
4                     (-81.702675, 30.060614)
Name: Coordinates, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="section" id="Transform-tuples-to-Point">
<h3>Transform tuples to Point<a class="headerlink" href="#Transform-tuples-to-Point" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>df[&#39;Coordinates&#39;] = df[&#39;Coordinates&#39;].apply(Point)
</pre></div>
</div>
</div>
</div>
<div class="section" id="Create-the-GeoDataFrame-by-setting-geometry-with-the-coordinates-created-previously">
<h3>Create the GeoDataFrame by setting geometry with the coordinates created previously<a class="headerlink" href="#Create-the-GeoDataFrame-by-setting-geometry-with-the-coordinates-created-previously" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>gdf = gpd.GeoDataFrame(df, geometry=&#39;Coordinates&#39;)
gdf.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>policyID</th>
      <th>statecode</th>
      <th>county</th>
      <th>eq_site_limit</th>
      <th>hu_site_limit</th>
      <th>fl_site_limit</th>
      <th>fr_site_limit</th>
      <th>tiv_2011</th>
      <th>tiv_2012</th>
      <th>eq_site_deductible</th>
      <th>hu_site_deductible</th>
      <th>fl_site_deductible</th>
      <th>fr_site_deductible</th>
      <th>point_latitude</th>
      <th>point_longitude</th>
      <th>line</th>
      <th>construction</th>
      <th>point_granularity</th>
      <th>Coordinates</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>119736</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>498960.0</td>
      <td>498960.00</td>
      <td>498960.0</td>
      <td>498960.0</td>
      <td>498960.00</td>
      <td>792148.90</td>
      <td>0.0</td>
      <td>9979.2</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.102261</td>
      <td>-81.711777</td>
      <td>Residential</td>
      <td>Masonry</td>
      <td>1</td>
      <td>POINT (-81.711777 30.102261)</td>
    </tr>
    <tr>
      <th>1</th>
      <td>448094</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>1322376.3</td>
      <td>1322376.30</td>
      <td>1322376.3</td>
      <td>1322376.3</td>
      <td>1322376.30</td>
      <td>1438163.57</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.063936</td>
      <td>-81.707664</td>
      <td>Residential</td>
      <td>Masonry</td>
      <td>3</td>
      <td>POINT (-81.70766400000001 30.063936)</td>
    </tr>
    <tr>
      <th>2</th>
      <td>206893</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>190724.4</td>
      <td>190724.40</td>
      <td>190724.4</td>
      <td>190724.4</td>
      <td>190724.40</td>
      <td>192476.78</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.089579</td>
      <td>-81.700455</td>
      <td>Residential</td>
      <td>Wood</td>
      <td>1</td>
      <td>POINT (-81.70045500000001 30.089579)</td>
    </tr>
    <tr>
      <th>3</th>
      <td>333743</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>0.0</td>
      <td>79520.76</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>79520.76</td>
      <td>86854.48</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.063236</td>
      <td>-81.707703</td>
      <td>Residential</td>
      <td>Wood</td>
      <td>3</td>
      <td>POINT (-81.70770300000001 30.063236)</td>
    </tr>
    <tr>
      <th>4</th>
      <td>172534</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>0.0</td>
      <td>254281.50</td>
      <td>0.0</td>
      <td>254281.5</td>
      <td>254281.50</td>
      <td>246144.49</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.060614</td>
      <td>-81.702675</td>
      <td>Residential</td>
      <td>Wood</td>
      <td>1</td>
      <td>POINT (-81.702675 30.060614)</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="increase-decrease-in-total-insured-value-(tiv)">
<h3>increase decrease in total insured value (tiv)<a class="headerlink" href="#increase-decrease-in-total-insured-value-(tiv)" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>gdf[&#39;tiv_total_inc_dec&#39;] = gdf[&#39;tiv_2012&#39;] - gdf[&#39;tiv_2011&#39;]
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>gdf.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>policyID</th>
      <th>statecode</th>
      <th>county</th>
      <th>eq_site_limit</th>
      <th>hu_site_limit</th>
      <th>fl_site_limit</th>
      <th>fr_site_limit</th>
      <th>tiv_2011</th>
      <th>tiv_2012</th>
      <th>eq_site_deductible</th>
      <th>hu_site_deductible</th>
      <th>fl_site_deductible</th>
      <th>fr_site_deductible</th>
      <th>point_latitude</th>
      <th>point_longitude</th>
      <th>line</th>
      <th>construction</th>
      <th>point_granularity</th>
      <th>Coordinates</th>
      <th>tiv_total_inc_dec</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>119736</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>498960.0</td>
      <td>498960.00</td>
      <td>498960.0</td>
      <td>498960.0</td>
      <td>498960.00</td>
      <td>792148.90</td>
      <td>0.0</td>
      <td>9979.2</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.102261</td>
      <td>-81.711777</td>
      <td>Residential</td>
      <td>Masonry</td>
      <td>1</td>
      <td>POINT (-81.711777 30.102261)</td>
      <td>293188.90</td>
    </tr>
    <tr>
      <th>1</th>
      <td>448094</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>1322376.3</td>
      <td>1322376.30</td>
      <td>1322376.3</td>
      <td>1322376.3</td>
      <td>1322376.30</td>
      <td>1438163.57</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.063936</td>
      <td>-81.707664</td>
      <td>Residential</td>
      <td>Masonry</td>
      <td>3</td>
      <td>POINT (-81.70766400000001 30.063936)</td>
      <td>115787.27</td>
    </tr>
    <tr>
      <th>2</th>
      <td>206893</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>190724.4</td>
      <td>190724.40</td>
      <td>190724.4</td>
      <td>190724.4</td>
      <td>190724.40</td>
      <td>192476.78</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.089579</td>
      <td>-81.700455</td>
      <td>Residential</td>
      <td>Wood</td>
      <td>1</td>
      <td>POINT (-81.70045500000001 30.089579)</td>
      <td>1752.38</td>
    </tr>
    <tr>
      <th>3</th>
      <td>333743</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>0.0</td>
      <td>79520.76</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>79520.76</td>
      <td>86854.48</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.063236</td>
      <td>-81.707703</td>
      <td>Residential</td>
      <td>Wood</td>
      <td>3</td>
      <td>POINT (-81.70770300000001 30.063236)</td>
      <td>7333.72</td>
    </tr>
    <tr>
      <th>4</th>
      <td>172534</td>
      <td>FL</td>
      <td>CLAY COUNTY</td>
      <td>0.0</td>
      <td>254281.50</td>
      <td>0.0</td>
      <td>254281.5</td>
      <td>254281.50</td>
      <td>246144.49</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>30.060614</td>
      <td>-81.702675</td>
      <td>Residential</td>
      <td>Wood</td>
      <td>1</td>
      <td>POINT (-81.702675 30.060614)</td>
      <td>-8137.01</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Request-the-state-outline-shapefile">
<h3>Request the state outline shapefile<a class="headerlink" href="#Request-the-state-outline-shapefile" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>states_raw = gpd.read_file(&#39;http://www2.census.gov/geo/tiger/GENZ2017/shp/cb_2017_us_state_5m.zip&#39;)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>states_raw.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>STATEFP</th>
      <th>STATENS</th>
      <th>AFFGEOID</th>
      <th>GEOID</th>
      <th>STUSPS</th>
      <th>NAME</th>
      <th>LSAD</th>
      <th>ALAND</th>
      <th>AWATER</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01</td>
      <td>01779775</td>
      <td>0400000US01</td>
      <td>01</td>
      <td>AL</td>
      <td>Alabama</td>
      <td>00</td>
      <td>131174431216</td>
      <td>4592944701</td>
      <td>(POLYGON ((-88.04374299999999 30.517423, -88.0...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>02</td>
      <td>01785533</td>
      <td>0400000US02</td>
      <td>02</td>
      <td>AK</td>
      <td>Alaska</td>
      <td>00</td>
      <td>1478588231566</td>
      <td>277723861311</td>
      <td>(POLYGON ((-150.242099 61.137835, -150.228774 ...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>04</td>
      <td>01779777</td>
      <td>0400000US04</td>
      <td>04</td>
      <td>AZ</td>
      <td>Arizona</td>
      <td>00</td>
      <td>294198661567</td>
      <td>1027245114</td>
      <td>POLYGON ((-114.799683 32.593621, -114.809393 3...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>08</td>
      <td>01779779</td>
      <td>0400000US08</td>
      <td>08</td>
      <td>CO</td>
      <td>Colorado</td>
      <td>00</td>
      <td>268425964573</td>
      <td>1178495763</td>
      <td>POLYGON ((-109.060253 38.599328, -109.059541 3...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>12</td>
      <td>00294478</td>
      <td>0400000US12</td>
      <td>12</td>
      <td>FL</td>
      <td>Florida</td>
      <td>00</td>
      <td>138911437206</td>
      <td>31398800291</td>
      <td>(POLYGON ((-80.751643 24.857254, -80.729063 24...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="restrict-data-to-the-state-of-Florda">
<h3>restrict data to the state of Florda<a class="headerlink" href="#restrict-data-to-the-state-of-Florda" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>florida = states_raw.loc[states_raw[&#39;STATEFP&#39;] == &#39;12&#39;]
</pre></div>
</div>
</div>
</div>
<div class="section" id="plot-geodataframe-coordinates-over-a-state-level-map-of-Florida">
<h3>plot geodataframe coordinates over a state-level map of Florida<a class="headerlink" href="#plot-geodataframe-coordinates-over-a-state-level-map-of-Florida" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ax = florida.plot(figsize=(15,15), color=&#39;white&#39;, edgecolor=&#39;black&#39;);
gdf.plot(ax=ax, linewidth=0.25, edgecolor=&#39;white&#39;, markersize=3.0, alpha=0.5, color=&#39;blue&#39;);

</pre></div>
</div>
</div>
</div>
<div class="section" id="plot-a-specific-column">
<h3>plot a specific column<a class="headerlink" href="#plot-a-specific-column" title="Permalink to this headline">¶</a></h3>
<p>using the total insured value increase-decrease created above</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ax = florida.plot(figsize=(15,15), color=&#39;white&#39;, edgecolor=&#39;black&#39;);
gdf.plot(ax=ax, linewidth=0.25, markersize=3.0, column = &#39;tiv_total_inc_dec&#39;,cmap=&#39;YlOrRd&#39;, alpha=1.0, legend=True,
         scheme = &#39;quantiles&#39;, legend_kwds={&#39;loc&#39;: &#39;center left&#39;,
                                         &#39;title&#39;: &#39;Total Population&#39;,
                                         &#39;fontsize&#39;: 14,&#39;frameon&#39;:False});
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/geopandas-101_172_0.png" src="_images/geopandas-101_172_0.png" />
</div>
</div>
<hr class="docutils" />
<p><a class="reference external" href="#Table-of-Contents">top</a></p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright .<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>